<mat-toolbar color="primary">
    <button mat-icon-button routerLink="/">
        <mat-icon aria-label="icon-button with a back icon">chevron_left</mat-icon>
    </button>
    <span>Auto Tagger</span>
    <span class="spacer"></span>
</mat-toolbar>

<div class="container" fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="10px" fxLayoutAlign="space-around start">
  <mat-card fxFlex="calc(50% - 48px)" fxFlex.lt-sm="100%">
    <mat-card-content>
        <div #dropzone class="dropzone" (drop)="drop($event)" (dragover)="allowDrop($event)" (click)="handleClick()">
          <img #srcImage [ngStyle]="{'display': showImage ? 'block' : 'none' }" />
          <div class="message" *ngIf="!showImage">
            <div><mat-icon>add_photo_alternate</mat-icon></div>
            <div>Upload an image</div>
          </div>
        </div>
        <input #inputFile id="file" type="file" name="name" style="display: none;" />
    </mat-card-content>
  </mat-card>

  <mat-card fxFlex="calc(50% - 48px)" fxFlex.lt-sm="100%">
    <mat-card-title fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="space-around start">
        <span fxFlex>Tags <span *ngIf="tagListSelection.selected.length"> ({{tagListSelection.selected.length}})</span></span>
        <span class="spacer"></span>
        <mat-checkbox (change)="togglePrefix()">#</mat-checkbox>
        <button mat-icon-button (click)="copySelectedItems()" [disabled]="tagListSelection.selected.length === 0">
          <mat-icon aria-label="icon-button with a back icon">file_copy</mat-icon>
        </button>
    </mat-card-title>
    <mat-card-content>
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
            <button mat-icon-button disabled></button>
            <mat-checkbox class="tagList-leaf-node"
                          [checked]="tagListSelection.isSelected(node)"
                          (change)="tagSelectionToggle(node);">{{prefix + node.item}}</mat-checkbox>
          </mat-tree-node>

          <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
            <button mat-icon-button matTreeNodeToggle
                    [attr.aria-label]="'toggle ' + node.filename">
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            <mat-checkbox (change)="tagSelectionToggle(node);">{{prefix + node.item}}</mat-checkbox>
          </mat-tree-node>
        </mat-tree>
    </mat-card-content>
  </mat-card>

  <div class="loading" *ngIf="message">
    <mat-progress-spinner [mode]="spinner.mode" [value]="spinner.value" color="warn"></mat-progress-spinner>
    <div class="message">{{message}}</div>
  </div>
</div>
